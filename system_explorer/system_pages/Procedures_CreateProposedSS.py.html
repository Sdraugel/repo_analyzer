
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>CreateProposedSS.py Details</title>
            <style>
                .container {
                    width: 60%;
                    margin: 50px auto;
                }
                h2 {
                    text-align: center;
                }
                .description {
                    background-color: #f9f9f9;
                    padding: 20px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    margin-top: 20px;
                }
                button {
                    padding: 10px 20px;
                    background-color: #4CAF50;
                    color: white;
                    border: none;
                    cursor: pointer;
                }
                button:hover {
                    background-color: #45a049;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h2>CreateProposedSS.py</h2>
                <div class="description">
                    <p><strong>Description:</strong></p>
                    <p>The code is written in Python and is part of a software that is in the public domain. It seems to be a part of a larger system for handling and manipulating meteorological data, specifically related to tropical weather events. The authors have made several updates over the years, incorporating new features and fixing issues.

The code defines a class `Procedure` that inherits from `TropicalUtility.TropicalUtility`. This class has several methods that manipulate and retrieve data from what appears to be a grid-based system, possibly representing geographical data.

The `__init__` method initializes the class with a database object.

The `trimTimeRange` method seems to be manipulating time ranges for a given parameter, fragmenting grids to their smallest time range, deleting interim time ranges, and creating new grids with the desired time range.

The `getTPCSurgeProbModelTime` method retrieves the start time of a model related to storm surge probabilities.

The `getExceedanceHeight` method retrieves and manipulates data related to the height at which a certain percentage of storm surge is exceeded.

The `makeTimingGridsFromModel` method creates timing grids from a model, possibly related to storm surge probabilities.

The code is incomplete, so it's hard to give a full analysis. However, it seems to be part of a larger system for meteorological data handling and analysis.

The provided code appears to be a part of a larger Python program that performs various operations on grids, possibly related to geospatial data or image processing. Here's a summary of what each section does:

1. The first block of code iterates over a list `trList`. For each item in the list, it retrieves a grid and performs various operations on it, such as applying masks, smoothing the grid, clipping values, and setting certain values to zero. The processed grid is then appended to `gridList`.

2. The second block of code creates a new grid for each grid in `gridList` with the method `createGrid`.

3. The `makeInundationMaxGrid` function takes a list of timing grids and a list of time ranges, and creates a maximum grid from these timing grids. It then creates a new grid with the maximum grid and a specific time range.

4. The `getVDATUMSGrid` function retrieves a grid from a database and applies a mask to points below a certain threshold. It then converts the grid values from meters to feet and sets points below the threshold to a minimum value.

5. The `combinedKey` function combines keys with the same phenomenon but different significance levels, prioritizing the key with the highest significance level.

6. The `makeNewKey` function creates a new hazard key given an old key and a new watch phenomenon and significance.

7. The `getUniqueKeys` function returns a list of unique keys for a specified grid and mask.

8. The `combineHazards` function combines hazards over a specified time range and spatial mask. It can either combine the specified hazard with existing hazards or replace them.

9. The `addHazard` function adds a specified hazard to a target grid over a specified mask. It can either combine the hazard with existing hazards or replace them.

The last line of the code seems to be incomplete and doesn't provide enough context to understand its purpose.

This code file appears to be written in Python and seems to be part of a larger system, possibly for weather forecasting or storm surge prediction. Here's a breakdown of what each function does:

1. The first part of the code is looking for a subKey that contains "SS". If it doesn't find one, it prints a message and returns. If it does find one, it combines hazards and returns a targetByteGrid and targetKeys.

2. `deleteAllGrids(self, weList)`: This function deletes all the grids in the given list. It gets the inventory of each grid and deletes it if it exists.

3. `makeDiffGrid(self)`: This function is creating a difference grid between a proposed SS grid and a raw guidance grid. It gets the inventory of each, checks if they exist, and if they do, it calculates the difference and returns.

4. `baseGuidanceTime(self)`: This function calculates a base guidance time by subtracting 2 hours from the current time, dividing by 6 hours, rounding down to the nearest whole number, and then multiplying by 6 hours.

5. `makeTimingTRs(self, baseTime, endTime)`: This function creates a list of time ranges for inundation timing grids. It starts at the baseTime and ends at the endTime, with each time range being 6 hours long.

6. `getTimingGrids(self)`: This function gets the timing grids. It calculates the base and end times, makes the time ranges, and then creates an empty grid for each time range.

7. `execute(self, editArea)`: This function appears to be the main function that executes the program. It encodes the edit area, extracts storm info, creates a list of active storms, and then displays a GUI for the user to input various variables. Depending on the user's input, it sets the data source, gets the storm surge edit area, encodes it, and sets the inundation threshold. 

The code seems to be incomplete as it ends abruptly.

This code appears to be part of a larger program that deals with storm tracking and forecasting, specifically related to storm surges and inundation. 

Here's a broad overview of what this code does:

1. It first checks if the storm information is up-to-date (i.e., updated within the last 7 hours). If not, it sends a message to the status bar asking to update the storm information.

2. It then extracts the storm number and ensures it's a national VTEC number by adding 1000 to it if it's less than 1000.

3. The code extracts the user's forecast confidence level from a string and converts it to a percentage.

4. It then sets a time range for the next 48 hours.

5. Depending on the source of the storm data ("N-SBN (Default)", "Backup", "PETSS"), it fetches the storm surge data and performs several operations on it, such as clipping the values, smoothing the grid, and calculating surge guidance grids.

6. It then creates new grids for different types of surge heights (MSL, MLLW, NAVD, MHHW) and deletes all previous grids.

7. If the source option is "Manual Replace" or "Manual Add", it allows the user to manually input the inundation height and timing. It checks if the user has selected a real edit area before proceeding.

8. Finally, if the source option is "Manual Add", it fetches the old grids.

Please note that the code seems incomplete, and some variables and methods are not defined within this snippet, so the exact functionality might vary based on the rest of the program.

This code seems to be part of a larger system that deals with weather data, specifically storm surge and inundation data.

1. The code starts by getting a grid of data for maximum inundation (surgePctGrid). This grid is then reset to zero, and new values are inserted where specified by the modifyMask.

2. It then proceeds to create timing grids. These grids likely represent the timing of certain weather events. If the sourceOption is "Manual Replace", it deletes all existing grids and creates new ones, replacing all IT grids. If the sourceOption is "Manual Add", it only replaces the selected grid points over the selected time.

3. The code then checks if there are any existing InundationTiming grids. If there are none, it sends a message to the status bar and ends the function.

4. If there are existing InundationTiming grids, it fetches all the timing grids and modifies them as needed. It then deletes the old grids and creates new ones.

5. Finally, the code creates a surge grid, which is saved as the InundationMax. It also creates a hazard key based on the GUI and calculates a new pSurge mask.

6. The last part of the code seems to be creating a hazard grid and checking for conflicts. It makes an empty grid and populates it based on the pSurge mask.

In summary, this code is manipulating and creating various grids of data related to storm surge and inundation. It provides options for manually replacing or adding to the data, and it checks for the existence of necessary data before proceeding.

This script appears to be part of a larger program for managing and analyzing hazard data, possibly related to weather forecasting. The main tasks performed by this script can be summarized as follows:

1. It retrieves a list of hazard time ranges (`hazTRList`) and checks for conflicts in the hazard grids. If any conflicts are found, it displays a message and returns.

2. If no conflicts are found, it checks if a ProposedSS grid already exists. If it doesn't, it creates an empty one. If it does, it retrieves the last one.

3. It then checks for conflicts in the hazard grids again. If any conflicts are found, it displays a message and returns.

4. If no conflicts are found, it merges any existing SS hazards into the ProposedSS grid.

5. It then updates these hazards where there was no hazard, using the pSurge grid.

6. If necessary, it upgrades Watch areas to Warnings over the edit area.

7. It then creates new storm surge hazard grids with a new time range.

8. Finally, it makes the timing grids and the max grid from the model.

The code seems to be part of a larger system for managing and analyzing hazard data, possibly related to weather forecasting. It's designed to handle and resolve conflicts in the data, merge hazard data, and create new grids for storm surge hazards.</p>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="javascript:history.back()"><button>Back</button></a>
                </div>
            </div>
        </body>
        </html>
        